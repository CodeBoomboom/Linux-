标下划线的为重点

# C/C++基础

## C与C++

### 1.C和C+区别：

(1)**C是面向过程编程**，C++是面向对象编程(三大特性)                                                                                                              (2)**C是C++的子集**，C++可以兼容C语言的特性，还增加了一些新特性，比如auto变量、引用、智能指针等                                                                                                                                                                                       (3)**C语言有一些不安全的特性**，比如指针使用潜在的危险性、强制类型转换的不确定性，C++增加了一些特性来改善安全问题，比如C++中有引用、智能指针、cast转换、异常捕获机制try-catch等     

指针使用危险性：指针最初指向一个对象，之后又为这个指针分配其他对象，而原先对象没有释放造成内存泄漏。悬空指针（指针的指向对象已被删除）和野指针（指针变量在定义时如果未初始化）可能会去访问不可控内存空间，破坏正常的数据，引发未知错误。

强制类型转换的不确定性:比如char* 转 int*会导致取得的值很奇怪, 再有int和指针之间的转换是风险极高的一种转换，一个具体的地址赋值给指针变量是非常危险的，因为该地址上的内存可能没有分配，也可能没有读写权限，一般会导致程序崩溃。                                                                                                 (4)**C++代码的复用性高**，因为C++中有重载和模板这些概念 ，在此基础上，实现了方便开发的标准模板库STL                                                                 

模板：有函数模板和类模板。

函数模板是建立一个通用函数，它所用到的数据的类型（包括返回值类型、形参类型、局部变量类型）可以不具体指定，用一个虚拟的类型来代替，等发生函数调用时再根据传入的实参的具体类型来逆推出真正的类型。

类模板就是建立一个通用类，它的成员变量类型和成员函数的返回值、形参类型不具体指定，用一个虚拟的类型来代替，使用类模板定义对象时，再根据实参类型来取代类模板中的虚拟类型。

重载：同一作用域下的同名函数，才存在重载关系。它的特点是函数名相同，参数的类型、数量或者顺序要有所不同，函数的返回值不能够作为函数重载的条件。

### 2.面向对象和面向过程：

面向过程:是根据业务逻辑来分析解决一个问题都需要哪些步骤，用函数把这些步骤依次实现。

面向对象:把构成问题的事物抽象成各个对象，把事物的属性变量和操作属性变量的函数封装进去，这样在写代码时以对象为核心，调用对象的成员方法就可以完成一些事情。

### <u>3.C和C+的结构体区别</u>

1.C中结构体没有成员函数和静态成员，C++中结构体可以有

2.C中结构体中成员默认的访问权限是public且不可更改，C++中也是public但可以更改为protected、private

3.C中结构体不可以继承，C++中结构体可以从类或其他结构体继承

4.C中结构体不能直接初始化数据成员，C++中可以

5.C中结构体在使用时要加上struct关键字，或用typedef取别名，C++可以省略struct关键字，直接使用

### <u>4.简述C++从代码到可执行二进制文件的过程</u>

预编译、编译、汇编、链接。

1. 预编译：这个过程主要的处理操作如下：

   （1） 将所有的#define删除，并且展开所有的宏定义

   （2） 处理所有的条件预编译指令，如#if、#ifdef

   （3） 处理#include预编译指令，将被包含的文件插入到该预编译指令的位置。

   （4） 过滤所有的注释

   （5） 添加行号和文件名标识。

2. 编译：这个过程主要的处理操作如下：

   （1） 词法分析：将源代码的字符序列分割成一系列的记号。

   （2） 语法分析：对记号进行语法分析，产生语法树。

   （3） 语义分析：判断表达式是否有意义。

   （4） 代码优化：

   （5） 目标代码生成：生成汇编代码。

   （6） 目标代码优化：

3. 汇编：这个过程主要是将汇编代码转变成机器可以执行的指令。

4. 链接：将不同的源文件产生的目标文件进行链接，从而形成一个可以执行的程序。

   链接分为静态链接和动态链接。

   静态链接，是在链接的时候就已经把要调用的函数或者过程链接到了生成的可执行文件中，就算你在去把静态库删除也不会影响可执行程序的执行；生成的静态链接库，Windows下以.lib为后缀，Linux下以.a为后缀。

   而动态链接，是在链接的时候没有把调用的函数代码链接进去，而是在执行的过程中，再去找要链接的函数，生成的可执行文件中没有函数代码，只包含函数的重定位信息，所以当你删除动态库时，可执行程序就不能运行。生成的动态链接库，Windows下以.dll为后缀，Linux下以.so为后缀。



## 关键字

### <u>1. C++中struct和class关键字的区别</u>

(1)类中成员的默认访问权限是private，结构体中成员默认访问权限是public                                                                                                        (2)类默认的继承方式是私有继承，结构体默认的继承方式是公有继承                                                                                                                                                  (3)类可以使用模板，结构体不可以(类模板:是对一批仅仅成员数据类型不同的类的抽象)         (4)class 关键字可以用于定义模板参数，就像 `typename`，而 `struct` 不能用于定义模板参数                                                                                                         

### <u>2.extern</u> 

声明外部变量【在函数或者文件外部定义的全局变量】

**extern"C"**

C++支持函数重载，编译器编译函数的过程中会根据函数名和函数形参列表重新命名；但是C语言不支持函数重载，编译C语言代码的函数时不会带上函数的参数类型，一般只包括函数名。

所以当我们想用C++代码调用C语言代码时，要加上extern "C"，这样会告诉编译器这部分代码按C语言而不是C++的方式进行编译。

这个功能主要用在下面的情况：

1.C++代码调用C语言代码

2.在C++的头文件中使用(C++出现以前，很多代码都是C语言写的，而且很底层的库也是C语言写的)

3.在多个人协同开发时，可能有的人比较擅长C语言，而有的人擅长C++，这样的情况下也会有用到

### <u>3.static关键字</u>

##### 1 static作用

(1)static关键字修饰的变量存储在全局区，默认初始化为0                                                                                                                                (2)static修饰的函数或变量只能在本文件中使用                                                                                                                                                     (3)static修饰的成员变量或成员函数，它们都是类的一部分，这个类的所有对象都共享这个静态成员变量和静态成员函数。

##### 2 (静态)全局变量/函数

(1)静态全局变量和全局函数都是在全局区                                                                                                                                                              (2)静态全局变量(函数)的作用域仅限于当前文件，全局变量(函数)的作用域是整个源程序，包括其他源文件。

##### 3 (静态)局部变量

(1)静态局部变量在全局区，局部变量在栈区                                                                                                                                                          (2)静态局部变量生命周期是整个程序运行结束，局部变量生命周期是随着函数的结束而结束                                                                              

(3)定义静态局部变量默认初始化为0，定义局部变量默认初始化一个随机值                                                                                                         (4)静态局部变量只初始化一次，而局部变量每调用一次函数都会重新初始化。                                                                                                          静态局部变量特点：只初始化一次，整个程序结束后才被操作系统回收，只能在定义的函数内使用。

##### 4 (静态)成员变量/函数

静态成员变量                                                                                                                                                                   (1)static修饰的成员变量，存放在静态存储区(全局区)，该类的所有对象都共享同一个静态成员。                                                                                                                                           (2)静态成员变量因为存储在全局区/静态区，所以在编译阶段就为它分配了内存                                                                                                   (3)静态成员变量在类内声明，类外初始化

静态成员函数                                                                                                                                                                                                                                                                                                          (1)静态成员函数也是存放在静态全局区，被该类的所有对象所共享                                                                                                                              (2)普通成员函数有 this 指针，可以访问类中的任意成员；而静态成员函数没有 this 指针，只能访问静态成员